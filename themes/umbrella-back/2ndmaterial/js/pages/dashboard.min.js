$(function() {
    altair_dashboard.init()
}), altair_dashboard = {
    init: function() {
        "use strict";
         altair_dashboard.clndr_calendar(), $window.load(function() {
           
        })
    },
    clndr_calendar: function() {
        function e() {
            t.width() < d ? t.addClass("events_over") : t.removeClass("events_over")
        }
        var t = $("#clndr_events");
        if (t.length) {
            for (var a = $("#clndr_events_template"), i = a.html(), n = Handlebars.compile(i), r = [], s = 0; 7 > s; s++) r.push(moment().weekday(s).format("dd"));
            theCalendar = t.clndr({
                weekOffset: 1,
                daysOfTheWeek: r,
                events: clndrEvents,
                render: function(e) {
                    return n(e)
                },
                clickEvents: {
                    click: function(a) {
                        if (a.events.length) {
                            var i = $(".clndr_events"),
                                n = a.date._i;
                            $(a.element).siblings(".day").removeClass("day-active").end().addClass("day-active"), i.children("[data-clndr-event=" + n + "]").length ? (i.children(".clndr_event").hide(), t.hasClass("events_visible") ? i.children("[data-clndr-event=" + n + "]").velocity("transition.slideUpIn", {
                                stagger: 100,
                                drag: !0
                            }) : (e(), t.addClass("events_visible"), i.children("[data-clndr-event=" + n + "]").velocity("transition.slideUpIn", {
                                stagger: 100,
                                drag: !0,
                                delay: 280
                            }))) : $(a.element).hasClass("last-month") ? (setTimeout(function() {
                                t.find(".calendar-day-" + a.date._i).click()
                            }, 380), t.find(".clndr_previous").click()) : $(a.element).hasClass("next-month") && (setTimeout(function() {
                                t.find(".calendar-day-" + a.date._i).click()
                            }, 380), t.find(".clndr_next").click())
                        }
                    }
                }
            });
            var l = function() {
                t.addClass("animated_change").removeClass("events_visible"), setTimeout(function() {
                    t.removeClass("animated_change")
                }, 380)
            };
            t.on("click", ".clndr_next", function(e) {
                e.preventDefault(), l(), setTimeout(function() {
                    theCalendar.forward()
                }, 280)
            }), t.on("click", ".clndr_previous", function(e) {
                e.preventDefault(), l(), setTimeout(function() {
                    theCalendar.back()
                }, 280)
            }), t.on("click", ".clndr_today", function(e) {
                e.preventDefault(), l(), setTimeout(function() {
                    theCalendar.setYear(moment().format("YYYY")).setMonth(moment().format("M") - 1)
                }, 280)
            }), t.on("click", ".clndr_events_close_button", function() {
                t.removeClass("events_visible events_over")
            }), event_modal = UIkit.modal("#modal_clndr_new_event"), t.on("click", ".clndr_add_event", function() {
                event_modal.isActive() ? event_modal.hide() : (event_modal.show(), t.removeClass("events_visible"), setTimeout(function() {
                    $window.resize()
                }, 280))
            }), $("#clndr_new_event_submit").on("click", function() {
                var e = "#clndr_event_title_control",
                    t = "#clndr_event_link_control",
                    a = "#clndr_event_date_control",
                    i = "#clndr_event_start_control",
                    n = "#clndr_event_end_control";
                if ("" == $(e).val()) return $(e).addClass("md-input-danger").focus(), altair_md.update_input($(e)), !1;
                if ("" == $(a).val()) return $(a).addClass("md-input-danger").focus(), altair_md.update_input($(a)), !1;
                var r = [{
                    date: $(a).val(),
                    title: $(e).val(),
                    url: $(t).val() ? $(t).val() : "javascript:void(0)",
                    timeStart: $(i).val(),
                    timeEnd: $(n).val()
                }];
                theCalendar.addEvents(r), theCalendar.setMonth(moment($(a).val()).format("M") - 1), event_modal.hide(), $(e + "," + t + "," + a + "," + i + "," + n).removeClass("md-input-danger").val(""), altair_md.update_input($(e + "," + t + "," + a + "," + i + "," + n))
            });
            var o = t.find(".day > span").outerWidth(),
                d = 7 * o + 240 + 32 + 14;
            e(), $(window).on("debouncedresize", function() {
                e()
            })
        }
    }
};
